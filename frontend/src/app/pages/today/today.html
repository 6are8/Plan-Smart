<!-- HEADER -->
<header class="header">
  <h1>Good morning, {{ username }}! Today will be a great day â˜€ï¸</h1>
  <span class="date">{{ today | date:'fullDate':'':'en-US' }}</span>
</header>

<!-- OPTIMIZED GRID LAYOUT -->
<section class="content-grid">

  <!-- AI PLAN - FULL WIDTH (Row 1) -->
  <div class="card plan-card">
    <h3>ğŸ¤– AI Plan for Today</h3>

    @if (generatingMorningPlan) {
      <div class="loading-state">
        <div class="spinner"></div>
        <p>Generating your personalized plan...</p>
      </div>
    } @else if (loadingToday) {
      <div class="loading-state">
        <div class="spinner"></div>
        <p>Loading...</p>
      </div>
    } @else if (morningPlanText) {
      <div class="plan-content">
        <p style="white-space: pre-line; margin: 0;">{{ morningPlanText }}</p>
      </div>
    } @else {
      <div class="placeholder">
        <p>Your plan is not ready yet. Come back later! ğŸŒ…</p>
      </div>
    }
  </div>

  <!-- WEATHER - COMPACT (Row 2, Left) -->
  <div class="card weather-card">
    <h3>ğŸŒ¤ï¸ Weather</h3>

    @if (loadingToday) {
      <div class="loading-state-small">
        <div class="spinner-small"></div>
      </div>
    } @else if (morningWeather) {
      <div class="weather-content">
        <div class="weather-icon">{{ getWeatherEmoji() }}</div>
        <div class="weather-details">
          @if (getTemperature()) {
            <div class="temperature">{{ getTemperature() }}</div>
          }
          <div class="condition">{{ getWeatherCondition() }}</div>
          @if (city) {
            <div class="location">{{ city }}</div>
          }
        </div>
      </div>
    } @else {
      <div class="placeholder-small">
        <p>Weather data unavailable</p>
      </div>
    }
  </div>

  <!-- EVENING PROMPT - COMPACT (Row 2, Right) -->
  <div class="card evening-card">
    <h3>ğŸŒ™ Evening Prompt</h3>

    @if (loadingToday) {
      <div class="loading-state-small">
        <div class="spinner-small"></div>
      </div>
    } @else if (eveningPromptText) {
      <div class="prompt-content">
        <p class="prompt-text">"{{ eveningPromptText }}"</p>
      </div>
    } @else {
      <div class="placeholder-small">
        <p>Your evening reflection will be ready later today ğŸŒ†</p>
      </div>
    }
  </div>

</section>