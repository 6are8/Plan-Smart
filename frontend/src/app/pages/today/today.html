<!-- HEADER -->
<header class="header">
  <h1>
    Good morning, {{ username }}! Today will be a great day ‚òÄÔ∏è
  </h1>
  <span class="date">
    {{ today | date:'fullDate':'':'en-US' }}
  </span>
</header>

<!-- GRID -->
<section class="grid">

  <!-- WEATHER (from morning_plan.weather) -->
  <div class="card weather">
    <h3>Weather in {{ city || '...' }}</h3>

    @if (loadingToday) {
      <div class="placeholder">Loading‚Ä¶</div>
    } @else if (morningWeather) {
      <div class="weather-row">
        <div class="icon">‚òÄÔ∏è</div>
        <div>
          <strong>{{ morningWeather }}</strong>
          <div class="muted">
            Source: morning plan
          </div>
        </div>
      </div>
    } @else {
      <div class="placeholder">
        Weather is not available yet.
      </div>
    }
  </div>

  <!-- EVENING PROMPT -->
  <div class="card">
    <h3>Evening Prompt üåô</h3>

    @if (loadingToday) {
      <p class="placeholder">Loading‚Ä¶</p>
    } @else if (eveningPromptText) {
      <p class="quote">‚Äú{{ eveningPromptText }}‚Äù</p>
    } @else {
      <p class="placeholder">No evening prompt yet.</p>
    }
  </div>

  <!-- MORNING PLAN (generated via /morning/plan then reloaded via /today) -->
  <div class="card">
    <h3>AI Plan for Today ü§ñ</h3>

    @if (generatingMorningPlan) {
      <div class="placeholder">
        Generating your plan‚Ä¶ (calling /morning/plan)
      </div>
    } @else if (loadingToday) {
      <div class="placeholder">
        Loading‚Ä¶
      </div>
    } @else if (morningPlanText) {
      <!-- plan_text is a big string; display as-is -->
      <p class="quote" style="white-space: pre-wrap; margin: 0;">
        {{ morningPlanText }}
      </p>
    } @else {
      <div class="placeholder">
        Plan not available yet.
      </div>
    }
  </div>

</section>

<!-- OPTIONAL: show last journal summary below cards -->
<section style="margin-top: 24px;">
  <div class="card">
    <h3>Last Journal Summary üìù</h3>

    @if (loadingToday) {
      <p class="placeholder">Loading‚Ä¶</p>
    } @else if (journalSummary) {
      <p class="quote" style="white-space: pre-wrap; margin: 0;">
        {{ journalSummary }}
      </p>
      @if (journalMood) {
        <p class="muted" style="margin-top: 10px;">
          Mood: {{ journalMood }}/5
        </p>
      }
    } @else {
      <p class="placeholder">No journal entry found for today.</p>
    }
  </div>
</section>
